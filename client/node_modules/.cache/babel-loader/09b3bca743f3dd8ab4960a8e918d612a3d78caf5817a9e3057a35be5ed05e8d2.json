{"ast":null,"code":"import React,{useState,createContext,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export const CartContext=/*#__PURE__*/createContext();export const CartProvider=props=>{const[cartItems,setCartItems]=useState([]);const[products,setProducts]=useState([]);useEffect(()=>{fetch('http://localhost:3001/products').then(response=>response.json()).then(data=>setProducts(data)).catch(error=>console.error('Error fetching products:',error));},[]);const removeFromCart=product=>{const productInCart=cartItems.find(item=>item.product.id===product.id);if(productInCart.quantity>1){setCartItems(cartItems.map(item=>item.product.id===product.id?{...item,quantity:item.quantity-1}:item));}else{setCartItems(cartItems.filter(item=>item.product.id!==product.id));}};return/*#__PURE__*/_jsx(CartContext.Provider,{value:[cartItems,setCartItems,removeFromCart,products,setProducts],children:props.children});};","map":{"version":3,"names":["React","useState","createContext","useEffect","jsx","_jsx","CartContext","CartProvider","props","cartItems","setCartItems","products","setProducts","fetch","then","response","json","data","catch","error","console","removeFromCart","product","productInCart","find","item","id","quantity","map","filter","Provider","value","children"],"sources":["/Users/mikolajszymanski/Documents/E-biznes/Zadanie10/client/src/CartContext.js"],"sourcesContent":["import React, { useState, createContext, useEffect } from 'react';\n\nexport const CartContext = createContext();\n\nexport const CartProvider = (props) => {\n    const [cartItems, setCartItems] = useState([]);\n    const [products, setProducts] = useState([]);\n\n    useEffect(() => {\n        fetch('http://localhost:3001/products')\n            .then(response => response.json())\n            .then(data => setProducts(data))\n            .catch(error => console.error('Error fetching products:', error));\n    }, []);\n\n    const removeFromCart = (product) => {\n        const productInCart = cartItems.find(item => item.product.id === product.id);\n        if (productInCart.quantity > 1) {\n            setCartItems(cartItems.map(item =>\n                item.product.id === product.id\n                    ? { ...item, quantity: item.quantity - 1 }\n                    : item\n            ));\n        } else {\n            setCartItems(cartItems.filter(item => item.product.id !== product.id));\n        }\n    };\n\n    return (\n        <CartContext.Provider value={[cartItems, setCartItems, removeFromCart, products, setProducts]}>\n            {props.children}\n        </CartContext.Provider>\n    );\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,aAAa,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAElE,MAAO,MAAM,CAAAC,WAAW,cAAGJ,aAAa,CAAC,CAAC,CAE1C,MAAO,MAAM,CAAAK,YAAY,CAAIC,KAAK,EAAK,CACnC,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACU,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAE5CE,SAAS,CAAC,IAAM,CACZU,KAAK,CAAC,gCAAgC,CAAC,CAClCC,IAAI,CAACC,QAAQ,EAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,EAAIL,WAAW,CAACK,IAAI,CAAC,CAAC,CAC/BC,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAAC,CACzE,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,cAAc,CAAIC,OAAO,EAAK,CAChC,KAAM,CAAAC,aAAa,CAAGd,SAAS,CAACe,IAAI,CAACC,IAAI,EAAIA,IAAI,CAACH,OAAO,CAACI,EAAE,GAAKJ,OAAO,CAACI,EAAE,CAAC,CAC5E,GAAIH,aAAa,CAACI,QAAQ,CAAG,CAAC,CAAE,CAC5BjB,YAAY,CAACD,SAAS,CAACmB,GAAG,CAACH,IAAI,EAC3BA,IAAI,CAACH,OAAO,CAACI,EAAE,GAAKJ,OAAO,CAACI,EAAE,CACxB,CAAE,GAAGD,IAAI,CAAEE,QAAQ,CAAEF,IAAI,CAACE,QAAQ,CAAG,CAAE,CAAC,CACxCF,IACV,CAAC,CAAC,CACN,CAAC,IAAM,CACHf,YAAY,CAACD,SAAS,CAACoB,MAAM,CAACJ,IAAI,EAAIA,IAAI,CAACH,OAAO,CAACI,EAAE,GAAKJ,OAAO,CAACI,EAAE,CAAC,CAAC,CAC1E,CACJ,CAAC,CAED,mBACIrB,IAAA,CAACC,WAAW,CAACwB,QAAQ,EAACC,KAAK,CAAE,CAACtB,SAAS,CAAEC,YAAY,CAAEW,cAAc,CAAEV,QAAQ,CAAEC,WAAW,CAAE,CAAAoB,QAAA,CACzFxB,KAAK,CAACwB,QAAQ,CACG,CAAC,CAE/B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}