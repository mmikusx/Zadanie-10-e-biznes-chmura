{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{CartContext}from'../CartContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Products(){const[products,setProducts]=useState([]);const[newProduct,setNewProduct]=useState({name:'',price:''});const[cartItems,setCartItems]=useContext(CartContext);useEffect(()=>{fetch('http://localhost:3001/products').then(response=>response.json()).then(data=>setProducts(data)).catch(error=>console.error('Error fetching products:',error));},[]);const handleInputChange=event=>{setNewProduct({...newProduct,[event.target.name]:event.target.value});};const handleFormSubmit=event=>{event.preventDefault();fetch('http://localhost:3001/products',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(newProduct)}).then(response=>response.json()).then(data=>{setProducts(data);setNewProduct({name:'',price:''});}).catch(error=>console.error('Error adding product:',error));};const addToCart=product=>{const productInCart=cartItems.find(item=>item.product.id===product.id);if(productInCart){setCartItems(cartItems.map(item=>item.product.id===product.id?{...item,quantity:item.quantity+1}:item));}else{setCartItems([...cartItems,{product,quantity:1}]);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Produkty\"}),/*#__PURE__*/_jsx(\"ul\",{children:products.map(product=>/*#__PURE__*/_jsxs(\"li\",{children:[product.name,\" - $\",product.price,/*#__PURE__*/_jsx(\"button\",{onClick:()=>addToCart(product),children:\"Dodaj do koszyka\"})]},product.id))}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:newProduct.name,onChange:handleInputChange,placeholder:\"Nazwa produktu\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",value:newProduct.price,onChange:handleInputChange,placeholder:\"Cena produktu\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Dodaj produkt\"})]})]});}export default Products;","map":{"version":3,"names":["React","useEffect","useState","useContext","CartContext","jsx","_jsx","jsxs","_jsxs","Products","products","setProducts","newProduct","setNewProduct","name","price","cartItems","setCartItems","fetch","then","response","json","data","catch","error","console","handleInputChange","event","target","value","handleFormSubmit","preventDefault","method","headers","body","JSON","stringify","addToCart","product","productInCart","find","item","id","map","quantity","children","onClick","onSubmit","type","onChange","placeholder","required"],"sources":["/Users/mikolajszymanski/Documents/E-biznes/Zadanie10/client/src/components/Products.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { CartContext } from '../CartContext';\n\nfunction Products() {\n    const [products, setProducts] = useState([]);\n    const [newProduct, setNewProduct] = useState({ name: '', price: '' });\n    const [cartItems, setCartItems] = useContext(CartContext);\n\n    useEffect(() => {\n        fetch('http://localhost:3001/products')\n            .then(response => response.json())\n            .then(data => setProducts(data))\n            .catch(error => console.error('Error fetching products:', error));\n    }, []);\n\n    const handleInputChange = (event) => {\n        setNewProduct({ ...newProduct, [event.target.name]: event.target.value });\n    };\n\n    const handleFormSubmit = (event) => {\n        event.preventDefault();\n        fetch('http://localhost:3001/products', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(newProduct)\n        })\n            .then(response => response.json())\n            .then(data => {\n                setProducts(data);\n                setNewProduct({ name: '', price: '' });\n            })\n            .catch(error => console.error('Error adding product:', error));\n    };\n\n    const addToCart = (product) => {\n        const productInCart = cartItems.find(item => item.product.id === product.id);\n        if (productInCart) {\n            setCartItems(cartItems.map(item =>\n                item.product.id === product.id\n                    ? { ...item, quantity: item.quantity + 1 }\n                    : item\n            ));\n        } else {\n            setCartItems([...cartItems, { product, quantity: 1 }]);\n        }\n    };\n\n    return (\n        <div>\n            <h1>Produkty</h1>\n            <ul>\n                {products.map(product => (\n                    <li key={product.id}>\n                        {product.name} - ${product.price}\n                        <button onClick={() => addToCart(product)}>Dodaj do koszyka</button>\n                    </li>\n                ))}\n            </ul>\n            <form onSubmit={handleFormSubmit}>\n                <input type=\"text\" name=\"name\" value={newProduct.name} onChange={handleInputChange}\n                       placeholder=\"Nazwa produktu\" required/>\n                <input type=\"number\" name=\"price\" value={newProduct.price} onChange={handleInputChange}\n                       placeholder=\"Cena produktu\" required/>\n                <button type=\"submit\">Dodaj produkt</button>\n            </form>\n        </div>\n    );\n}\n\nexport default Products;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}